{"version":3,"sources":["admin_layout.js"],"names":["layui","define","exports","layer","element","tabFilter","containerWidth","$","width","tabsWidth","page","pageTotal","isHomeUrl","url","undefined","tabIdx","tabs","menu","tabEl","getTabWidth","w","window","onresize","scrollTab","left","css","setTabWidth","last","find","eq","lastWidth","totalWidth","pos","position","Math","ceil","setCurrentMenu","parent","removeClass","addClass","hide","on","hasClass","jleft","scrollActiveTab","tab","tabOffset","offset","tabRight","activeTab","offsetTab","data","idx","index","query","getUrlQuery","title","history","pushState","location","pathname","queryToString","switch","close","createTab","isHome","iframe","clone","attr","append","tabChange","search","findIndex","item","tabDelete","remove","splice","push","tabAdd","id","getMatchTab","i","length","setItemedMenu","that","parents","setIframeUrl","uri","trim","substr","text","queryString","loadCurrentMenu","hash","console","log","event","each","el"],"mappings":"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","sourcesContent":["/*\r\n * +----------------------------------------------------------------------\r\n * | Builder Admin\r\n * +----------------------------------------------------------------------\r\n * | Author: King east <1207877378@qq.com>\r\n * +----------------------------------------------------------------------\r\n */\r\n\r\nlayui.define(['layer', 'element'], function(exports){\r\n    const layer = layui.layer\r\n        ,element = layui.element;\r\n\r\n    // 选项卡过滤名\r\n    const tabFilter = 'admin-layout-tabs'\r\n\r\n    // 父容器宽度\r\n    let containerWidth = $(`[lay-filter=\"${tabFilter}\"]`).width()\r\n\r\n    // 选项卡宽度\r\n    let tabsWidth = 0\r\n\r\n    // 页码\r\n    let page = 0\r\n\r\n    // 总页数\r\n    let pageTotal = 0\r\n\r\n    // 是否首页URL\r\n    const isHomeUrl = function (url) {\r\n        return url === undefined || url === '' || url === null || url === '/'\r\n    }\r\n\r\n    // 当前焦点选项卡索引\r\n    let tabIdx = -1\r\n\r\n    // 已经打开的选项卡\r\n    let tabs = [];\r\n\r\n    const menu = $('#admin-layout-menu')\r\n\r\n    // 选项卡滚动栏\r\n    const tabEl = $('#admin-layout-tabs .layui-tab-title')\r\n\r\n    // 获取tabs宽度\r\n    const getTabWidth = function () {\r\n        const w = $('[lay-filter=\"admin-layout-tabs\"] .layui-tab-title').width()\r\n        tabsWidth = w\r\n    }\r\n    getTabWidth()\r\n    window.onresize = function () {\r\n        getTabWidth()\r\n    }\r\n\r\n    const scrollTab = function (left) {\r\n        tabEl.css({\r\n            left: `${left}px`\r\n        })\r\n    }\r\n\r\n    // 获取tab宽度\r\n    const setTabWidth = function () {\r\n        const last = tabEl.find('li').eq(tabIdx + 1)\r\n        const lastWidth = last.width()\r\n        const totalWidth = tabEl.width()\r\n        const width = totalWidth - lastWidth\r\n        const pos = last.position()\r\n        pageTotal = Math.ceil(totalWidth / tabsWidth)\r\n\r\n        if (pos.left >= containerWidth) {\r\n            scrollTab(containerWidth - (pos.left + lastWidth + 50))\r\n        }\r\n\r\n        // console.log('tabs page', pageTotal)\r\n        // if (width <= tabsWidth) {\r\n        //     console.log('ttt')\r\n        // } else {\r\n        //     w.css({\r\n        //         left: `${0-(totalWidth / (page + 1)) / 2}px`\r\n        //     })\r\n        //     console.log('jjj', totalWidth, page, (totalWidth / (page + 1)) / 2)\r\n        // }\r\n\r\n        return tabEl\r\n    }\r\n\r\n    // 设置url为焦点菜单\r\n    const setCurrentMenu = function (url) {\r\n        menu.find('[target=\"admin-container\"]').parent().removeClass('layui-this')\r\n        menu.find('[href=\"' + url + '\"]').parent().addClass('layui-this')\r\n    }\r\n\r\n    // 让第一个tab不可关闭\r\n    $('#admin-layout-tabs .layui-tab-title li:first .layui-tab-close').hide()\r\n\r\n    // 翻页点击\r\n    $('.ke-body-tab-icon').on('click', function () {\r\n        if (tabsWidth <= containerWidth) {\r\n            return\r\n        }\r\n        let left = tabEl.position().left\r\n        if ($(this).hasClass('ke-body-tab-prev')) {\r\n            left = left + containerWidth\r\n            if (left === containerWidth) {\r\n                return\r\n            }\r\n            if (left > 0) {\r\n                left = 0\r\n            }\r\n            scrollTab(left)\r\n        } else if ($(this).hasClass('ke-body-tab-next')) {\r\n            if (tabsWidth < containerWidth) {\r\n                return\r\n            }\r\n            const last = tabEl.find('li:last')\r\n            left = left - last.width()\r\n            if (left < containerWidth) {\r\n                left = left - containerWidth\r\n            } else {\r\n                left = tabsWidth + left\r\n            }\r\n            const jleft = (last.position().left - containerWidth + last.width() + 50)\r\n            if (left < 0 - (tabsWidth - containerWidth)) {\r\n                // 获取最后一个元素\r\n                left = 0 - (jleft)\r\n            }\r\n            scrollTab(left)\r\n        }\r\n        // setTabWidth()\r\n    })\r\n\r\n    // 滚动到焦点tab\r\n    const scrollActiveTab = function () {\r\n        const tab = $(`[lay-filter=\"${tabFilter}\"]`)\r\n        const tabOffset = tab.offset()\r\n        const tabRight = tabOffset.left + tab.width()\r\n        // 取焦点位置\r\n        const activeTab = tabEl.find('li').eq(tabIdx + 1)\r\n        const offsetTab = activeTab.offset()\r\n        if (offsetTab.left < tabOffset.left) {\r\n            setTabWidth()\r\n        } else if (offsetTab.left + activeTab.width() > tabRight) {\r\n            setTabWidth()\r\n        }\r\n    }\r\n\r\n    // 监听选项卡切换\r\n    element.on('tab(' + tabFilter + ')', function (data) {\r\n        const idx = data.index - 1\r\n        if (idx === -1) {\r\n            tabIdx = -1\r\n            $('.ke-tab-item.itemed').removeClass('itemed')\r\n            $('.ke-tab-item:first').addClass('itemed')\r\n\r\n            const query = getUrlQuery()\r\n            if (query.title) {\r\n                delete query.title\r\n            }\r\n            history.pushState(null, null, location.pathname + queryToString(query))\r\n            setCurrentMenu('/')\r\n            scrollActiveTab()\r\n            return\r\n        }\r\n        if (tabs[idx] && tabIdx !== idx) {\r\n            tabIdx = idx\r\n            tabs[idx].switch()\r\n            scrollActiveTab()\r\n        }\r\n    })\r\n\r\n    // 监听选项卡删除\r\n    element.on('tabDelete(' + tabFilter + ')', function (data) {\r\n        const idx = data.index - 1\r\n        if (idx === -1) {\r\n            return\r\n        }\r\n        tabs[idx].close()\r\n    })\r\n\r\n    // 创建tab\r\n    const createTab = function (url, title) {\r\n        let isHome = isHomeUrl(url)\r\n\r\n        const iframe = $('.ke-tab-item:last').removeClass('itemed').clone()\r\n        iframe.find('iframe').attr('src', url).attr('id', url)\r\n        iframe.addClass('itemed')\r\n\r\n        $('.ke-tab-content').append(iframe)\r\n\r\n        const tab = {\r\n            url: url,\r\n            title: title,\r\n            iframe: iframe,\r\n            switch: function() {\r\n                element.tabChange(tabFilter, url)\r\n                $('.ke-tab-item').removeClass('itemed')\r\n                iframe.addClass('itemed')\r\n                const query = queryToString({ title: title })\r\n\r\n                if (isHome) {\r\n                    history.pushState(null, null, location.pathname + location.search)\r\n                } else {\r\n                    history.pushState(null, null, location.pathname + query + '#' + url)\r\n                }\r\n                setCurrentMenu(url)\r\n            },\r\n            close: function () {\r\n                const idx = tabs.findIndex(item => item.url === url)\r\n                element.tabDelete(tabFilter, url)\r\n                iframe.remove()\r\n                if (idx > -1) {\r\n                    tabs.splice(idx, 1)\r\n                }\r\n                getTabWidth()\r\n            }\r\n        }\r\n\r\n        tabs.push(tab)\r\n\r\n        element.tabAdd(tabFilter, {\r\n            title: title,\r\n            id: url\r\n        })\r\n        element.tabChange(tabFilter, url)\r\n\r\n        getTabWidth()\r\n\r\n        return tab\r\n    }\r\n\r\n    // 获取url对应的tab\r\n    // 不存在返回-1, -2是首页\r\n    const getMatchTab = function (url) {\r\n        if (isHomeUrl(url)) {\r\n            return -2\r\n        }\r\n        for (let i = 0; i < tabs.length; i++) {\r\n            if (tabs[i].url === url) {\r\n                return tabs[i]\r\n            }\r\n        }\r\n        return -1\r\n    }\r\n\r\n    // 展开父级\r\n    const setItemedMenu = function (that) {\r\n        that.parents('.layui-nav-item').addClass('layui-nav-itemed')\r\n    }\r\n\r\n    // iframe加载\r\n    const setIframeUrl = function (uri, title) {\r\n        let url = uri.trim()\r\n        if (url.substr(0, 1) !== '/' || url.substr(0, 2) === '//') {\r\n            return\r\n        }\r\n        // 获取标题\r\n        if (title === '' || title === undefined || title === null) {\r\n            title = menu.find('[href=\"' + url + '\"]').text()\r\n        }\r\n        const query = getUrlQuery()\r\n        if (title === '' || title === undefined || title === null) {\r\n            title = query.title\r\n        }\r\n        query.title = title\r\n\r\n        let tab = getMatchTab(url)\r\n        if (tab !== -1 && tab !== -2) {\r\n            tab.switch()\r\n        } else if(tab !== -2) {\r\n            tab = createTab(url, title)\r\n        } else {\r\n            // 首页\r\n            element.tabChange(tabFilter, '/')\r\n        }\r\n        const queryString = queryToString(query)\r\n\r\n        if (url === undefined || url === '' || url === null || url === '/') {\r\n            history.pushState(null, null, location.pathname + queryString)\r\n        } else {\r\n            history.pushState(null, null, location.pathname + queryString + '#' + url)\r\n        }\r\n    }\r\n\r\n    // 加载当前焦点菜单\r\n    const loadCurrentMenu = function () {\r\n        let hash = location.hash\r\n        if (hash) {\r\n            hash = hash.substr(1)\r\n\r\n            const that = menu.find('[href=\"' + hash + '\"]')\r\n            setItemedMenu(that)\r\n            setIframeUrl(hash)\r\n        }\r\n    }\r\n\r\n    // 后台布局头部\r\n    $('[lay-filter=\"top-header-right\"] a').on('click', function () {\r\n        const url = $(this).attr('href')\r\n        const title = $(this).text()\r\n        $(this).parent().removeClass('layui-this')\r\n        setIframeUrl(url, title)\r\n        console.log('nav', url, title)\r\n        return false\r\n    })\r\n\r\n    // 侧栏点击\r\n    menu.on('click', '[target=\"admin-container\"]', function () {\r\n        const url = $(this).attr('href')\r\n\r\n        setIframeUrl(url)\r\n        return false\r\n    })\r\n\r\n    // 导航切换\r\n    $('[lay-filter=\"admin-layout-tabs-nav\"] [event]').on('click', function () {\r\n        const event = $(this).attr('event')\r\n        $(this).parent().removeClass('layui-this')\r\n\r\n        switch (event) {\r\n            case 'closeCurrent':\r\n                if (tabIdx === -1) {\r\n                    return\r\n                }\r\n                tabs[tabIdx].close()\r\n                break\r\n            case 'closeOther':\r\n                const tab = { ...tabs[tabIdx] }\r\n                tabEl.find('li').each((idx, el) => {\r\n                    const id = $(el).attr('lay-id')\r\n                    if (id !== '/' && id !== tab.url) {\r\n                        $(el).remove()\r\n                        $(`.ke-body [id=\"${id}\"]`).parent().remove()\r\n                    }\r\n                })\r\n                tabs = [ { ...tab } ]\r\n                tabIdx = 0\r\n                scrollTab(0)\r\n\r\n                break\r\n            case 'closeAll':\r\n                tabEl.find('li').each((idx, el) => {\r\n                    const id = $(el).attr('lay-id')\r\n                    if (id !== '/') {\r\n                        $(el).remove()\r\n                        $(`.ke-body [id=\"${id}\"]`).parent().remove()\r\n                    }\r\n                })\r\n                tabs = []\r\n                tabIdx = -1\r\n                scrollTab(0)\r\n\r\n                element.tabChange(tabFilter, '/')\r\n\r\n                break\r\n        }\r\n    })\r\n\r\n    loadCurrentMenu()\r\n\r\n    setTabWidth()\r\n\r\n    exports('admin_layout')\r\n});\r\n"],"file":"../admin_layout.js"}