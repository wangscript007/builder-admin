{"version":3,"sources":["k_form.js"],"names":["layui","define","exports","layer","form","on","data","load","text","$","elem","html","reset","attr","removeClass","addClass","ajax","url","id","method","field","complete","close","success","res","code","msg","undefined","setTimeout","location","href","error"],"mappings":";;AAAAA,KAAK,CAACC,MAAN,CAAa,CAAC,OAAD,EAAU,MAAV,CAAb,EAAgC,UAASC,OAAT,EAAiB;AAC7C,MAAIC,KAAK,GAAGH,KAAK,CAACG,KAAlB;AAAA,MACKC,IAAI,GAAGJ,KAAK,CAACI,IADlB,CAD6C,CAI7C;;AACAA,EAAAA,IAAI,CAACC,EAAL,CAAQ,QAAR,EAAkB,UAAUC,IAAV,EAAgB;AAC9B,QAAIC,IAAI,GAAGJ,KAAK,CAACI,IAAN,CAAWD,IAAI,CAACF,IAAhB,CAAX;AACA,QAAII,IAAI,GAAGC,CAAC,CAACH,IAAI,CAACI,IAAN,CAAD,CAAaC,IAAb,EAAX;;AACA,QAAIC,KAAK,GAAG,SAARA,KAAQ,GAAY;AACpBH,MAAAA,CAAC,CAACH,IAAI,CAACI,IAAN,CAAD,CAAaG,IAAb,CAAkB,UAAlB,EAA8B,KAA9B,EACKC,WADL,CACiB,oBADjB,EAEKH,IAFL,CAEUH,IAFV;AAGH,KAJD;;AAKAC,IAAAA,CAAC,CAACH,IAAI,CAACI,IAAN,CAAD,CAAaG,IAAb,CAAkB,UAAlB,EAA8B,IAA9B,EACKE,QADL,CACc,oBADd,EAEKJ,IAFL,CAEU,KAFV;AAIAF,IAAAA,CAAC,CAACO,IAAF,CAAO;AACHC,MAAAA,GAAG,EAAE,mBAAmBX,IAAI,CAACF,IAAL,CAAUc,EAD/B;AAEHC,MAAAA,MAAM,EAAE,MAFL;AAGHb,MAAAA,IAAI,EAAEA,IAAI,CAACc,KAHR;AAIHC,MAAAA,QAAQ,EAAE,oBAAY;AAClBlB,QAAAA,KAAK,CAACmB,KAAN,CAAYf,IAAZ;AACH,OANE;AAOHgB,MAAAA,OAAO,EAAE,iBAAUC,GAAV,EAAe;AACpB,YAAIA,GAAG,CAACC,IAAJ,KAAa,CAAjB,EAAoB;AAChBtB,UAAAA,KAAK,CAACuB,GAAN,CAAUF,GAAG,CAACE,GAAd;AACH,SAFD,MAEO;AACHvB,UAAAA,KAAK,CAACuB,GAAN,CAAU,MAAV;AACH,SALmB,CAOpB;;;AACA,YAAIF,GAAG,CAACP,GAAJ,KAAYU,SAAhB,EAA2B;AACvBC,UAAAA,UAAU,CAAC,YAAY;AACnBC,YAAAA,QAAQ,CAACC,IAAT,GAAgBN,GAAG,CAACP,GAApB;AACH,WAFS,EAEP,IAFO,CAAV;AAGH,SAJD,MAIO;AACHL,UAAAA,KAAK;AACR;AACJ,OAtBE;AAuBHmB,MAAAA,KAAK,EAAE,iBAAY;AACfnB,QAAAA,KAAK;AACR;AAzBE,KAAP;AA2BA,WAAO,KAAP;AACH,GAxCD;AA2CAV,EAAAA,OAAO,CAAC,QAAD,CAAP;AACH,CAjDD","sourcesContent":["layui.define(['layer', 'form'], function(exports){\r\n    var layer = layui.layer\r\n        ,form = layui.form;\r\n\r\n    // 表单提交\r\n    form.on('submit', function (data) {\r\n        var load = layer.load(data.form)\r\n        var text = $(data.elem).html()\r\n        var reset = function () {\r\n            $(data.elem).attr('disabled', false)\r\n                .removeClass('layui-btn-disabled')\r\n                .html(text)\r\n        }\r\n        $(data.elem).attr('disabled', true)\r\n            .addClass('layui-btn-disabled')\r\n            .html('提交中')\r\n\r\n        $.ajax({\r\n            url: '?component_id=' + data.form.id,\r\n            method: 'POST',\r\n            data: data.field,\r\n            complete: function () {\r\n                layer.close(load)\r\n            },\r\n            success: function (res) {\r\n                if (res.code !== 0) {\r\n                    layer.msg(res.msg);\r\n                } else {\r\n                    layer.msg('提交成功');\r\n                }\r\n\r\n                // 如果返回url，则2s后跳转\r\n                if (res.url !== undefined) {\r\n                    setTimeout(function () {\r\n                        location.href = res.url;\r\n                    }, 1500);\r\n                } else {\r\n                    reset();\r\n                }\r\n            },\r\n            error: function () {\r\n                reset();\r\n            }\r\n        });\r\n        return false;\r\n    });\r\n\r\n\r\n    exports('k_form')\r\n});\r\n"],"file":"../k_form.js"}